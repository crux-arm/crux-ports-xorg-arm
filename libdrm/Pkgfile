# Description: Userspace interface to kernel DRM services
# URL: http://dri.freedesktop.org/
# Maintainer: CRUX Xorg Team, xorg-ports at crux dot nu
# Arch Maintainer: CRUX-ARM System Team, devel at crux-arm dot nu
# Depends on: meson ninja xorg-libpciaccess

name=libdrm
version=2.4.113
release=1
source=(https://dri.freedesktop.org/libdrm/libdrm-$version.tar.xz)

build() {
  cd $name-$version
  meson build \
    --prefix=/usr \
    -Dman-pages=disabled \
    -Dvalgrind=disabled \
    -Dcairo-tests=disabled \
    -Dintel=disabled \
    -Dradeon=disabled \
    -Dnouveau=disabled \
    -Dvmwgfx=disabled \
    -Damdgpu=disabled \
    -Domap=enabled \
    -Dexynos=enabled \
    -Dtegra=enabled

  DESTDIR=$PKG ninja -C build -j ${JOBS:-1} install
}
